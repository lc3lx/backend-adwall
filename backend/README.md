# AddWall API - ูุธุงู ุฅุฏุงุฑุฉ ุงูุดุฑูุงุช ูุงูููุจููุงุช

## ๐ ูุธุฑุฉ ุนุงูุฉ ุนูู ุงููุดุฑูุน

**AddWall** ูู ูุธุงู ุฅุฏุงุฑุฉ ุดุงูู ููุดุฑูุงุช ูุงูููุจููุงุช ูุจูู ุจุงุณุชุฎุฏุงู Node.jsุ Express.jsุ ูMongoDB. ุงููุธุงู ูุชูุญ ููุดุฑูุงุช ุงูุชุณุฌูู ูุฅุฏุงุฑุฉ ุจูุงูุงุชูุงุ ููููุณุชุฎุฏููู ุงูุจุญุซ ุนู ุงูุดุฑูุงุช ูุงูุงุณุชูุงุฏุฉ ูู ุงูููุจููุงุช.

## ๐ ุงูููุฒุงุช ุงูุฑุฆูุณูุฉ

### ๐ ูุธุงู ุงููุตุงุฏูุฉ ูุงูุฃูุงู

- ุชุณุฌูู ุงููุณุชุฎุฏููู ุงูุฌุฏุฏ
- ุชุณุฌูู ุงูุฏุฎูู ูุงูุฎุฑูุฌ
- ุฅุนุงุฏุฉ ุชุนููู ูููุฉ ุงููุฑูุฑ
- ุญูุงูุฉ ุงูู API ุจุงุณุชุฎุฏุงู JWT
- ูุธุงู ุงูุฃุฏูุงุฑ (User, Manager, Admin)

### ๐ฅ ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู

- ุฅุฏุงุฑุฉ ุงูููู ุงูุดุฎุตู
- ุชุญุฏูุซ ุงูุจูุงูุงุช ุงูุดุฎุตูุฉ
- ุชุบููุฑ ูููุฉ ุงููุฑูุฑ
- ุฅุฏุงุฑุฉ ุงูุนูุงููู
- ูุงุฆูุฉ ุงูููุถูุฉ

### ๐ ุฅุฏุงุฑุฉ ุงููุฆุงุช

- ุฅูุดุงุก ูุชุญุฏูุซ ุงููุฆุงุช
- ุฏุนู ุงููุบุชูู ุงูุนุฑุจูุฉ ูุงูุฅูุฌููุฒูุฉ
- ูุธุงู ุงูุฃููุงู ูููุฆุงุช
- ุฑูุน ุตูุฑ ุงููุฆุงุช

### ๐ข ุฅุฏุงุฑุฉ ุงูุดุฑูุงุช

- ูุธุงู ุทูุจุงุช ุงูุชุณุฌูู ููุดุฑูุงุช
- ููุงููุฉ ุงูุฃุฏูู ุนูู ุงูุดุฑูุงุช
- ุงูุจุญุซ ุงููุชูุฏู ุจุงูุงุณู ูุงููููุน
- ุฅุฏุงุฑุฉ ุจูุงูุงุช ุงูุดุฑูุฉ ุงููุงููุฉ

### ๐ซ ุฅุฏุงุฑุฉ ุงูููุจููุงุช

- ุฅูุดุงุก ูุฅุฏุงุฑุฉ ุงูููุจููุงุช
- ุชุญุฏูุฏ ุชุงุฑูุฎ ุงูุงูุชูุงุก
- ูุธุงู ุงูุฎุตููุงุช

### ๐ผ๏ธ ุฅุฏุงุฑุฉ ุงููููุงุช

- ุฑูุน ุงูุตูุฑ ูููุณุชุฎุฏููู ูุงููุฆุงุช ูุงูุดุฑูุงุช
- ูุนุงูุฌุฉ ุงูุตูุฑ ุจุงุณุชุฎุฏุงู Sharp
- ุชุฎุฒูู ูุญูู ุขูู

## ๐๏ธ ุงูุชูููุงุช ุงููุณุชุฎุฏูุฉ

### Backend

- **Node.js** - ุจูุฆุฉ ุงูุชุดุบูู
- **Express.js** - ุฅุทุงุฑ ุงูุนูู
- **MongoDB** - ูุงุนุฏุฉ ุงูุจูุงูุงุช
- **Mongoose** - ODM ูู MongoDB

### ุงูุฃูุงู ูุงููุตุงุฏูุฉ

- **JWT** - ูุตุงุฏูุฉ ุงูุฑููุฒ ุงููููุฒุฉ
- **Bcrypt** - ุชุดููุฑ ูููุงุช ุงููุฑูุฑ
- **Express Validator** - ุงูุชุญูู ูู ุตุญุฉ ุงูุจูุงูุงุช

### ุงููููุงุช ูุงูุตูุฑ

- **Multer** - ุฑูุน ุงููููุงุช
- **Sharp** - ูุนุงูุฌุฉ ุงูุตูุฑ

### ุฃุฎุฑู

- **Nodemailer** - ุฅุฑุณุงู ุงูุจุฑูุฏ ุงูุฅููุชุฑููู
- **Compression** - ุถุบุท ุงูุงุณุชุฌุงุจุงุช
- **CORS** - ูุดุงุฑูุฉ ุงูููุงุฑุฏ
- **Morgan** - ุชุณุฌูู ุงูุทูุจุงุช

## ๐ ูููู ุงููุดุฑูุน

```
backend/
โโโ config/
โ   โโโ database.js          # ุฅุนุฏุงุฏุงุช ูุงุนุฏุฉ ุงูุจูุงูุงุช
โโโ controllers/             # ูุชุญููุงุช ุงูุนูููุงุช
โ   โโโ authService.js       # ูุตุงุฏูุฉ ุงููุณุชุฎุฏููู
โ   โโโ userService.js       # ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู
โ   โโโ categoryService.js   # ุฅุฏุงุฑุฉ ุงููุฆุงุช
โ   โโโ companyService.js    # ุฅุฏุงุฑุฉ ุงูุดุฑูุงุช
โ   โโโ couponService.js     # ุฅุฏุงุฑุฉ ุงูููุจููุงุช
โโโ middlewares/             # ุงููุณุงุฆุท ุงููุชูุณุทุฉ
โ   โโโ errorMiddleware.js   # ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก
โ   โโโ uploadImageMiddleware.js  # ุฑูุน ุงูุตูุฑ
โ   โโโ validatorMiddleware.js    # ุงูุชุญูู ูู ุงูุตุญุฉ
โโโ model/                   # ููุงุฐุฌ ูุงุนุฏุฉ ุงูุจูุงูุงุช
โ   โโโ userModel.js         # ูููุฐุฌ ุงููุณุชุฎุฏู
โ   โโโ categoryModel.js     # ูููุฐุฌ ุงููุฆุฉ
โ   โโโ companyModel.js      # ูููุฐุฌ ุงูุดุฑูุฉ
โ   โโโ couponModel.js       # ูููุฐุฌ ุงูููุจูู
โโโ router/                  # ุงููุณุงุฑุงุช
โ   โโโ index.js             # ุงููุณุงุฑุงุช ุงูุฑุฆูุณูุฉ
โ   โโโ authRoute.js         # ูุณุงุฑุงุช ุงููุตุงุฏูุฉ
โ   โโโ userRoute.js         # ูุณุงุฑุงุช ุงููุณุชุฎุฏููู
โ   โโโ categoryRoute.js     # ูุณุงุฑุงุช ุงููุฆุงุช
โ   โโโ companyRoute.js      # ูุณุงุฑุงุช ุงูุดุฑูุงุช
โ   โโโ couponRoute.js       # ูุณุงุฑุงุช ุงูููุจููุงุช
โโโ utils/                   # ุงูุฃุฏูุงุช ุงููุณุงุนุฏุฉ
โ   โโโ apiError.js          # ุฃุฎุทุงุก API
โ   โโโ apiFeatures.js       # ููุฒุงุช API ุงูุฅุถุงููุฉ
โ   โโโ createToken.js       # ุฅูุดุงุก ุงูุฑููุฒ ุงููููุฒุฉ
โ   โโโ sendEmail.js         # ุฅุฑุณุงู ุงูุจุฑูุฏ ุงูุฅููุชุฑููู
โ   โโโ validators/          # ุงูุชุญูู ูู ุตุญุฉ ุงูุจูุงูุงุช
โโโ uploads/                 # ุงููููุงุช ุงููุฑููุนุฉ
โ   โโโ brands/              # ุดุนุงุฑุงุช ุงูุนูุงูุงุช ุงูุชุฌุงุฑูุฉ
โ   โโโ categories/          # ุตูุฑ ุงููุฆุงุช
โ   โโโ products/            # ุตูุฑ ุงูููุชุฌุงุช
โ   โโโ users/               # ุตูุฑ ุงููุณุชุฎุฏููู
โโโ server.js                # ููุทุฉ ุงูุจุฏุงูุฉ ููุชุทุจูู
```

## ๐ง ุงูุชุซุจูุช ูุงูุฅุนุฏุงุฏ

### ุงููุชุทูุจุงุช ุงูุฃุณุงุณูุฉ

- Node.js (ุงูุฅุตุฏุงุฑ 16 ุฃู ุฃุญุฏุซ)
- MongoDB
- npm ุฃู yarn

### ุฎุทูุงุช ุงูุชุซุจูุช

1. **ุงุณุชูุณุงุฎ ุงููุดุฑูุน**

   ```bash
   git clone <repository-url>
   cd addwall-backend
   ```

2. **ุชุซุจูุช ุงูุชุจุนูุงุช**

   ```bash
   npm install
   ```

3. **ุฅุนุฏุงุฏ ูุชุบูุฑุงุช ุงูุจูุฆุฉ**
   ุฃูุดุฆ ููู `.env` ูู ุงููุฌูุฏ ุงูุฌุฐุฑ:

   ```env
   NODE_ENV=development
   PORT=8000
   DB_URI=mongodb://localhost:27017/addwall
   JWT_SECRET_KEY=your-super-secret-jwt-key
   JWT_EXPIRES_IN=30d
   BASE_URL=http://localhost:8000
   EMAIL_HOST=smtp.gmail.com
   EMAIL_PORT=587
   EMAIL_USER=your-email@gmail.com
   EMAIL_PASSWORD=your-app-password
   ```

4. **ุชุดุบูู ูุงุนุฏุฉ ุงูุจูุงูุงุช**
   ุชุฃูุฏ ูู ุชุดุบูู MongoDB ุนูู ุงููููุฐ ุงูุงูุชุฑุงุถู (27017)

5. **ุชุดุบูู ุงูุชุทุจูู**

   ```bash
   # ููุชุทููุฑ
   npm run start:dev

   # ููุฅูุชุงุฌ
   npm start
   ```

## ๐ ุงุณุชุฎุฏุงู API

### ุงูุฃุณุงุณูุงุช

- **Base URL**: `http://localhost:8000/api/v1`
- **Authentication**: ุงุณุชุฎุฏู Bearer Token ูู ุงูููุฏุฑ
- **Content-Type**: `application/json` ููุทูุจุงุช

### ุฃูุซูุฉ ุนูู ุงูุงุณุชุฎุฏุงู

#### 1. ุชุณุฌูู ูุณุชุฎุฏู ุฌุฏูุฏ

```bash
POST /api/v1/auth/signup
Content-Type: application/json

{
  "name": "ุฃุญูุฏ ูุญูุฏ",
  "email": "ahmed@example.com",
  "password": "123456"
}
```

#### 2. ุชุณุฌูู ุงูุฏุฎูู

```bash
POST /api/v1/auth/login
Content-Type: application/json

{
  "email": "ahmed@example.com",
  "password": "123456"
}
```

#### 3. ุฅูุดุงุก ูุฆุฉ ุฌุฏูุฏุฉ (Admin Only)

```bash
POST /api/v1/categories
Authorization: Bearer YOUR_JWT_TOKEN
Content-Type: application/json

{
  "nameAr": "ูุทุงุนู",
  "nameEn": "Restaurants",
  "color": "#FF6B6B"
}
```

## ๐ฏ API Endpoints

### ๐ ุงููุตุงุฏูุฉ (Authentication)

- `POST /auth/signup` - ุชุณุฌูู ูุณุชุฎุฏู ุฌุฏูุฏ
- `POST /auth/login` - ุชุณุฌูู ุงูุฏุฎูู
- `POST /auth/forgotPassword` - ูุณูุช ูููุฉ ุงููุฑูุฑ
- `POST /auth/verifyResetCode` - ุงูุชุญูู ูู ููุฏ ุฅุนุงุฏุฉ ุงูุชุนููู
- `PUT /auth/resetPassword` - ุฅุนุงุฏุฉ ุชุนููู ูููุฉ ุงููุฑูุฑ

### ๐ค ุงููุณุชุฎุฏููู (Users)

- `GET /users/getMe` - ุงูุญุตูู ุนูู ุจูุงูุงุชู
- `PUT /users/changeMyPassword` - ุชุบููุฑ ูููุฉ ุงููุฑูุฑ
- `PUT /users/updateMe` - ุชุญุฏูุซ ุจูุงูุงุชู
- `DELETE /users/deleteMe` - ุญุฐู ุญุณุงุจู
- `GET /users` - ุฌูุจ ุฌููุน ุงููุณุชุฎุฏููู (Admin)
- `POST /users` - ุฅูุดุงุก ูุณุชุฎุฏู ุฌุฏูุฏ (Admin)
- `PUT /users/:id` - ุชุญุฏูุซ ูุณุชุฎุฏู (Admin)
- `DELETE /users/:id` - ุญุฐู ูุณุชุฎุฏู (Admin)

### ๐ ุงููุฆุงุช (Categories)

- `GET /categories` - ุฌูุจ ุฌููุน ุงููุฆุงุช
- `GET /categories/:id` - ุฌูุจ ูุฆุฉ ูุญุฏุฏุฉ
- `POST /categories` - ุฅูุดุงุก ูุฆุฉ ุฌุฏูุฏุฉ (Admin)
- `PUT /categories/:id` - ุชุญุฏูุซ ูุฆุฉ (Admin)
- `DELETE /categories/:id` - ุญุฐู ูุฆุฉ (Admin)

### ๐ข ุงูุดุฑูุงุช (Companies)

- `POST /companies` - ุชูุฏูู ุทูุจ ุชุณุฌูู ุดุฑูุฉ
- `GET /companies` - ุฌูุจ ุฌููุน ุงูุดุฑูุงุช ุงููุนุชูุฏุฉ
- `GET /companies/search` - ุงูุจุญุซ ุนู ุดุฑูุฉ ุจุงูุงุณู
- `GET /companies/category/:categoryId` - ุดุฑูุงุช ูุฆุฉ ูุญุฏุฏุฉ
- `GET /companies/pending` - ุทูุจุงุช ุงูุดุฑูุงุช ุงููุนููุฉ
- `PUT /companies/update/:id` - ุชุญุฏูุซ ุดุฑูุฉ (Owner)
- `DELETE /companies/delete/:id` - ุญุฐู ุดุฑูุฉ (Owner)
- `PATCH /companies/:id/approve` - ุงูููุงููุฉ ุนูู ุดุฑูุฉ (Admin)

### ๐ซ ุงูููุจููุงุช (Coupons)

- `GET /coupons` - ุฌูุจ ุฌููุน ุงูููุจููุงุช (Admin)
- `GET /coupons/:id` - ุฌูุจ ููุจูู ูุญุฏุฏ (Admin)
- `POST /coupons` - ุฅูุดุงุก ููุจูู ุฌุฏูุฏ (Admin)
- `PUT /coupons/:id` - ุชุญุฏูุซ ููุจูู (Admin)
- `DELETE /coupons/:id` - ุญุฐู ููุจูู (Admin)

## ๐ ูุธุงู ุงูุฃูุงู

### ุงูุฃุฏูุงุฑ ูุงูุตูุงุญูุงุช

1. **User** - ุงููุณุชุฎุฏู ุงูุนุงุฏู

   - ูุฑุงุกุฉ ุงูุจูุงูุงุช ุงูุนุงูุฉ
   - ุฅุฏุงุฑุฉ ูููู ุงูุดุฎุตู
   - ุทูุจ ุชุณุฌูู ุดุฑูุฉ

2. **Manager** - ุงููุฏูุฑ

   - ุฌููุน ุตูุงุญูุงุช ุงููุณุชุฎุฏู
   - ุฅุฏุงุฑุฉ ุงููุฆุงุช
   - ุฅุฏุงุฑุฉ ุงูููุจููุงุช

3. **Admin** - ุงููุฏูุฑ ุงูุนุงู
   - ุฌููุน ุงูุตูุงุญูุงุช
   - ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู
   - ุงูููุงููุฉ ุนูู ุงูุดุฑูุงุช
   - ุญุฐู ุฃู ุจูุงูุงุช

### ุญูุงูุฉ API

- JWT Authentication
- Password Hashing with Bcrypt
- Input Validation
- Rate Limiting
- CORS Protection
- Error Handling Middleware

## ๐๏ธ ููุงุฐุฌ ูุงุนุฏุฉ ุงูุจูุงูุงุช

### User Model

```javascript
{
  name: String,
  email: String (unique),
  password: String (hashed),
  phone: String,
  profileImg: String,
  role: Enum['user', 'manager', 'admin'],
  active: Boolean,
  addresses: Array,
  wishlist: Array,
  passwordChangedAt: Date,
  passwordResetCode: String,
  passwordResetExpires: Date,
  passwordResetVerified: Boolean
}
```

### Category Model

```javascript
{
  nameAr: String,
  nameEn: String,
  color: String,
  slug: String,
  image: String
}
```

### Company Model

```javascript
{
  companyName: String,
  categoryId: ObjectId (ref: Category),
  description: String,
  logo: String,
  country: String,
  city: String,
  email: String,
  whatsapp: String,
  facebook: String,
  website: String,
  isApproved: Boolean,
  createdAt: Date
}
```

### Coupon Model

```javascript
{
  name: String,
  expire: Date,
  discount: Number
}
```

## ๐ง ุฅุนุฏุงุฏุงุช ุงูุจุฑูุฏ ุงูุฅููุชุฑููู

ูุฅุฑุณุงู ุงูุจุฑูุฏ ุงูุฅููุชุฑููู (ูุซู ุฅุนุงุฏุฉ ุชุนููู ูููุฉ ุงููุฑูุฑ)ุ ุฃุถู ุงููุชุบูุฑุงุช ุงูุชุงููุฉ ุฅูู ููู `.env`:

```env
EMAIL_HOST=smtp.gmail.com
EMAIL_PORT=587
EMAIL_USER=your-email@gmail.com
EMAIL_PASSWORD=your-app-password
```

## ๐ ูุดุฑ ุงูุชุทุจูู

### ูุชุบูุฑุงุช ุงูุจูุฆุฉ ููุฅูุชุงุฌ

```env
NODE_ENV=production
PORT=8000
DB_URI=mongodb+srv://username:password@cluster.mongodb.net/addwall
JWT_SECRET_KEY=your-production-jwt-secret
BASE_URL=https://your-domain.com
```

### ุฎุทูุงุช ุงููุดุฑ

1. ุฅุนุฏุงุฏ ุฎุงุฏู MongoDB
2. ุชุญุฏูุซ ูุชุบูุฑุงุช ุงูุจูุฆุฉ
3. ุจูุงุก ุงูุชุทุจูู
4. ุชุดุบูู ุงูุฎุงุฏู

## ๐งช ุงูุงุฎุชุจุงุฑ

### ุงุฎุชุจุงุฑ API ูุน Postman

1. ุงุณุชูุฑุฏ ููู `AddWall_API_Postman_Collection.json`
2. ุฃุนุฏ ุถุจุท ูุชุบูุฑุงุช ุงูุจูุฆุฉ
3. ุงุจุฏุฃ ุงูุงุฎุชุจุงุฑ ูู ุชุณุฌูู ุงููุณุชุฎุฏู

### ุงุฎุชุจุงุฑ ุงููุญุฏุงุช

```bash
npm test
```

## ๐ ุณุฌู ุงูุชุบููุฑุงุช

### ุงูุฅุตุฏุงุฑ 1.0.0

- ุฅุทูุงู ุงููุธุงู ุงูุฃุณุงุณู
- ูุธุงู ุงููุตุงุฏูุฉ ุงููุงูู
- ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู ูุงููุฆุงุช ูุงูุดุฑูุงุช
- ูุธุงู ุงูููุจููุงุช
- ุฑูุน ููุนุงูุฌุฉ ุงูุตูุฑ

## ๐ค ุงููุณุงููุฉ

ูุฑุญุจ ุจุงููุณุงููุงุช! ูุฑุฌู ุงุชุจุงุน ุงูุฎุทูุงุช ุงูุชุงููุฉ:

1. Fork ุงููุดุฑูุน
2. ุฃูุดุฆ ูุฑุน ููููุฒุฉ ุงูุฌุฏูุฏุฉ
3. Commit ุงูุชุบููุฑุงุช
4. Push ุฅูู ุงููุฑุน
5. ุงูุชุญ Pull Request

## ๐ ุงูุฏุนู

ูุฃู ุงุณุชูุณุงุฑุงุช ุฃู ูุดุงููุ ูุฑุฌู:

- ูุชุญ Issue ูู GitHub
- ูุฑุงุณูุฉ ูุฑูู ุงูุชุทููุฑ

## ๐ ุงูุชุฑุฎูุต

ูุฐุง ุงููุดุฑูุน ูุฑุฎุต ุชุญุช ุฑุฎุตุฉ MIT - ุฑุงุฌุน ููู LICENSE ููุชูุงุตูู.

---

**ุชู ุชุทููุฑ ุจูุงุณุทุฉ**: ูุฑูู AddWall Development
**ุงูุฅุตุฏุงุฑ**: 1.0.0
**ุชุงุฑูุฎ ุขุฎุฑ ุชุญุฏูุซ**: 2024
